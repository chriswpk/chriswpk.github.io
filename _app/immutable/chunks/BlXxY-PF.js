class h extends Phaser.Scene{constructor(){super(),this.renderTexture=null,this.groundLayer=null,this.elementLayer=null,this.timer=null,this.goalBody=null,this.goalTarget=null,this.groupBall=null,this.goalCount=0,this.combo=0,this.scoreText=null,this.comboText=null,this.ship=null,this.difficulty=1}preload(){}create(){this.matter.world.setBounds();const t=this.renderer.width/2,i=this.renderer.height/2,e=this.make.tilemap({key:"ground"}),s=e.addTilesetImage("SportGround","groundtiles"),a=e.addTilesetImage("SportsElements","elementstiles");this.groundLayer=e.createLayer("Ground",s,0,0),this.elementLayer=e.createLayer("Equipment",a,0,0),this.groundLayer.setVisible(!1),this.elementLayer.setVisible(!1),this.background=e,this.renderTexture=this.add.renderTexture(0,0,e.widthInPixels,e.heightInPixels),this.renderTexture.x=t,this.renderTexture.y=i;const r=this.add.image(42,42,"exitButton");r.setScale(.42,.42),r.setInteractive(),r.on("pointerdown",()=>this.sys.game.globals.exitTo());var o=this.matter.world.nextGroup();this.groupBall=this.matter.world.nextGroup(),this.ship=this.matter.add.image(t,this.renderer.height-300,"ship",null,{chamfer:16}).setScale(2,2).setIgnoreGravity(!0).setBounce(1).setMass(5).setCollisionGroup(o),this.goalTarget=this.matter.world.nextCategory(),this.goalBody=this.matter.add.rectangle(t,this.renderer.height,400,240,{chamfer:16}),this.goalBody.ignoreGravity=!0,this.goalBody.isSensor=!0,this.goalBody.isStatic=!0,this.matter.add.mouseSpring({length:1,stiffness:.9,collisionFilter:{group:o}}),this.timerEvent=this.time.addEvent({delay:5e3,callback:this.createRandomBall,callbackScope:this}),this.createUI()}update(){this.renderTexture.clear(),this.renderTexture.draw(this.groundLayer),this.renderTexture.draw(this.elementLayer)}createRandomBall(){const t=this.renderer.width/2,i=Math.round(Math.random()*(this.sys.game.globals.ballsKey.length-1)),e=this.matter.add.image(t,100,"sheet_equipment",this.sys.game.globals.ballsKey[i],null,{chamfer:16}).setBounce(1).setCollisionCategory(this.goalTarget).setCollisionGroup(this.groupBall).setOnCollideWith(this.ship.body,s=>{this.combo+=1,this.updateCombo(),this.combo>5&&(this.goalCount-=1,this.updateScore())});this.goalBody.setOnCollideWith(e.body,s=>{s.gameObject.destroy(),this.matter.world.remove(s),this.goalCount+=1,this.combo=0,this.updateScore(),this.updateCombo()}),this.timerEvent=this.time.addEvent({delay:5e3,callback:this.createRandomBall,callbackScope:this})}createUI(){const t=this.renderer.width/2;this.scoreText=this.add.bitmapText(t,40,"kenneySpace","Score: 0",11),this.scoreText.setOrigin(.5,.5),this.comboText=this.add.bitmapText(t,70,"kenneySpace","Combo: 0",11),this.comboText.setOrigin(.5,.5),this.comboText.alpha=0}updateScore(){this.scoreText.text=`Score: ${-this.goalCount}`}updateCombo(){this.combo===0&&(this.comboText.alpha=0),!(this.combo<5)&&(this.comboText.text=`Combo: ${this.combo}`,this.tweens.add({targets:this.comboText,alpha:1,scaleX:{from:0,to:1},scaleY:{from:0,to:1},ease:"Back",duration:200}))}}export{h as default};
